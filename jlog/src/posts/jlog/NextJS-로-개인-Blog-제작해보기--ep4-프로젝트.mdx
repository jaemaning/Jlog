---
title: "NextJS ë¡œ ê°œì¸ Blog ì œì‘í•´ë³´ê¸° - ep.4 í”„ë¡œì íŠ¸"
description: "ì´ë²ˆ ê¸€ì€ 'ìºì¹˜í…Œì´ë¸” B2C ì„œë¹„ìŠ¤ì—ì„œ vanilla-extractë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•'ì„ ë³´ê³  ë§ì€ ì˜ê°ì„ ì–»ì—ˆìŠµë‹ˆë‹¤."
date: 2024-05-13T07:50:21.612Z
tags: []
category : "Python"
---
ì´ë²ˆ ê¸€ì€ "[ìºì¹˜í…Œì´ë¸” B2C ì„œë¹„ìŠ¤ì—ì„œ vanilla-extractë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•](https://medium.com/catchtable/how-to-use-vanilla-extract-in-catchtable-b2c-6c4e712c471f)"ì„ ë³´ê³  ë§ì€ ì˜ê°ì„ ì–»ì—ˆìŠµë‹ˆë‹¤.

ì‚¬ì‹¤ api ë¡œì§ì„ ì„¤ê³„í•˜ê³  mdx íŒŒì¼ì„ SSG, SSR í•˜ì—¬ êµ¬í˜„í•˜ëŠ” ê²ƒë„ ì–´ë µì§€ë§Œ, ë‹¨ìˆœ ë°˜ë³µì„ ì£½ì–´ë„ ì‹«ì–´í•˜ëŠ” ì €ëŠ” CSS ì—ì„œ ì‹ ê²½ì„ ë§ì´ ì“°ëŠ” í¸ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” Atomic design pattern ì˜ vanilla-extract ìµœì í™” ë²„ì „ìœ¼ë¡œ êµ¬í˜„í•˜ê³ ì í•˜ì˜€ìŠµë‹ˆë‹¤. ì œê°€ ì›í•˜ëŠ” **ì¡°ê±´ì€ 3ê°€ì§€** ì˜€ìŠµë‹ˆë‹¤.

> 1. **zero-runtime css í™˜ê²½**ìœ¼ë¡œ ë™ì‘í•´ì•¼í•œë‹¤.
> 2. ì½”ë“œì˜ **ì¤‘ë³µì„ ìµœì†Œí™”**í•´ì•¼í•œë‹¤.
> 3. ì˜ˆì™¸ ì‚¬í•­ ë°œìƒ ì‹œ ìœ„ ë‘ ì‚¬í•­ì„ ë¬´ì‹œí•˜ë”ë¼ë„ **í¸í•˜ê²Œ êµ¬í˜„ê°€ëŠ¥í•œ ë°©ë²•ì´ ì¡´ì¬**í•´ì•¼í•œë‹¤.


ê¸°ì¡´ì˜ styled-component ê°™ì€ í¸í•˜ê³  ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì•„ë‹Œ vanilla-extractë¥¼ ë„ì…í•œ ì´ìœ ëŠ” zero-runtime í™˜ê²½ì¸ ê²ƒì´ í¬ë‹¤. (ì‚¬ì‹¤ í° ì›¹ì‚¬ì´íŠ¸ê°€ ì•„ë‹Œì´ìƒ ì—„ì²­ë‚œ í¼í¬ë¨¼ìŠ¤ ì°¨ì´ê°€ ë‚˜ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.)

ê·¸ë ‡ê¸°ì— ìµœëŒ€í•œ zero-runtime í™˜ê²½ì„ êµ¬ì¶•í•´ì•¼ê² ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

ì œê°€ ìƒê°í•œ ë°©ì‹ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ base ê°€ ë˜ëŠ” atomic í•œ components ë“¤ì„ ì œì‘í•©ë‹ˆë‹¤. 

## atomic design pattern In Vanilla-extract

### zero runtime í™•ì¸

```typescript
// style Merge

import { style } from '@vanilla-extract/css';
import { vars } from '@/styles/globalTheme.css';

// 1

export const Button = style({
  color : vars.color.gray-700,
  backgroundColor : vars.themeColor.btnColor // darkMode, lightMode ì— ë”°ë¼ ì ìš©
});

// 2

export const smallButton = style([button, {
  fontSize: vars.fontSizes.small,
  padding : vars.space.small
}]);

export const largeButton = style([button, {
  fontSize: vars.fontSizes.large,
  padding : vars.space.large
}]);

// 3

export const styleMerged = style([base, {
  color: '#FFFFFF',
}]);
```

ê·¹ë‹¨ì ì¸ ì˜ˆì‹œë¥¼ ë“¤ì—ˆì§€ë§Œ, 1ë²ˆ ì²˜ëŸ¼ ê¸°ë³¸ì ì¸ ë¼ˆëŒ€ button component ë¥¼ ë§Œë“¤ê³  í•´ë‹¹ componentì— ì—¬ëŸ¬ íŒŒìƒ ë²„ì „(2ë²ˆ)ì„ mergeStyle ì„ í™œìš©í•´ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. ì´í›„ ì‹¤ ì‚¬ìš©í• ë•Œ ì¡°ê¸ˆ ë³€ê²½ì‚¬í•­ì´ í•„ìš”í•˜ë‹¤ë©´ 3ë²ˆ ì²˜ëŸ¼ ë‹¤ì‹œ mergeStyle ì„ í™œìš©í•´ ìµœëŒ€í•œ compile í™˜ê²½ì—ì„œ css ë¥¼ ì£¼ì…í•´ zero-runtime í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. (ì¼ë°˜ì ì¸ ìƒí™©ì—ì„œ ê°„ë‹¨íˆ ìŠ¤íƒ€ì¼ì„ ì ìš©í•  ë–„ ìœ„ì²˜ëŸ¼ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.)

ë‹¤ìŒì€ recipeë¥¼ ì´ìš©í•œ style ì„¤ì •ì…ë‹ˆë‹¤. ì•„ë˜ ë°©ì‹ì„ í†µí•´ atomic design pattern ì„ ìµœëŒ€í•œ ì ìš©í•´ë³´ë ¤ê³  ë…¸ë ¥í•˜ì˜€ìŠµë‹ˆë‹¤.

ìš°ì„  recipe ë¥¼ í†µí•˜ì—¬ ê¸°ë³¸ í‹€ì„ ì¡ê³  props ë¥¼ í†µí•´ ì¼ë¶€ ì˜µì…˜ë“¤ì„ ì ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ëª¨ë“  ì˜µì…˜ì„ ì ìš©í•´ë‘ê³  ì‚¬ìš©í•œë‹¤ë©´ í¸í•˜ê² ì§€ë§Œ ìš°ì„  ìì£¼ ì‚¬ìš©í•˜ëŠ” ì˜µì…˜ë“¤ë§Œ ì ìš©í•´ ë‘ì—ˆìŠµë‹ˆë‹¤.


```typescript
// button.css.ts
import { vars } from '@/styles/globalTheme.css';
import { recipe } from '@vanilla-extract/recipes';

export const buttonStyle = recipe({
    base: {
      display : 'flex',
      borderRadius: '8px',
      cursor: 'pointer',
      margin : 'none',
      boxSizing : 'border-box',
      transition: 'background-color 0.3s, color 0.3s',  // ë¶€ë“œëŸ¬ìš´ ìƒ‰ìƒ ì „í™˜ íš¨ê³¼
      backgroundColor: vars.themeColor.color.mainBackground,  // ê¸°ë³¸ ë°°ê²½ìƒ‰
      color: vars.themeColor.color.mainFontColor,  // ê¸°ë³¸ í°íŠ¸ìƒ‰
      textAlign: 'center', // í…ìŠ¤íŠ¸ ê°€ìš´ë° ì •ë ¬
      verticalAlign: 'middle', // ì„¸ë¡œ ê°€ìš´ë° ì •ë ¬
      justifyContent: 'center', // ê°€ë¡œ ê°€ìš´ë° ì •ë ¬
      alignItems: 'center', // ì„¸ë¡œ ê°€ìš´ë° ì •ë ¬
      ':hover': {
        backgroundColor: vars.themeColor.color.btnColor,  // hover ì‹œ ë°°ê²½ìƒ‰ ë³€ê²½
      }
    },
  
    variants: {
      color: vars.recipeColor,
      size: {
        small: {
          fontSize: vars.fontSizes.small,
          padding : vars.space.small,
          width: '50px',
          height: '30px',
        },
        medium: {
          fontSize: vars.fontSizes.medium,
          padding : vars.space.medium,
          width: '100px',
          height: '50px',
        },
        large: {
          fontSize: vars.fontSizes.large,
          padding : vars.space.large,
          width: '150px',
          height: '70px',
        },
        fit: {
          width: 'fit-content',
          height: 'fit-content',
        },
        circle : {
          borderRadius: '50%',
          width: '40px',
          height: '40px',
        }
      },
      margin: vars.recipeMargin,
      border: vars.recipeBorder
    },
  
    defaultVariants: {
      size: 'medium',
      border : 'none'
    }
  });
```

ì´ë ‡ê²Œ ì •ì˜í•˜ê³  ì‚¬ìš©í•˜ê²Œ ëœë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.

```typescript
// button.tsx

import React from 'react';
import { buttonStyle } from '@/components/atom/button/button.css';
import { vars } from '@/styles/globalTheme.css';

interface ButtonProps {
    children: React.ReactNode;
    onClick?: () => void; // onClick íƒ€ì…ì„ ì •ì˜
    color? : keyof typeof vars.recipeColor;
    size? : 'small' | 'medium' | 'large' | 'fit' | 'circle';
    margin? : keyof typeof vars.recipeMargin;
    border? : keyof typeof vars.recipeBorder;
}

const Button: React.FC<ButtonProps> = ({
    children, 
    onClick,
    color,
    size,
    margin,
    border
}) => {
    return (
        <button className={buttonStyle({ color, size, margin, border })} onClick={onClick}>{children}</button>
    );
};

export default Button;
```

```typescript
// darkModeButton.tsx

'use client';

import * as style from './darkModeBtn.css';
import { useTheme } from 'next-themes';
import { useEffect, useState } from 'react';
import Button from '../button/button';
import WbSunnyIcon from '@mui/icons-material/WbSunny';
import NightsStayIcon from '@mui/icons-material/NightsStay';

const DarkModeBtn = () => {
  const [mounted, setMounted] = useState(false);
  const { resolvedTheme, setTheme } = useTheme();

  useEffect(() => {
    setMounted(true);
  }, []);

  return (
    <div className={style.container}>
      <Button
        onClick={() => setTheme(resolvedTheme === 'light' ? 'dark' : 'light')}
        aria-label="DarkModeBtn"
        size='circle'
      >
        {mounted && (
          resolvedTheme === 'light' ? <NightsStayIcon fontSize='small' /> : <WbSunnyIcon fontSize='small' />
        )}
      </Button>
    </div>
  );
};

export default DarkModeBtn;
```

ì´ ë•Œ ì œê°€ ê°€ì¥ ë¨¼ì € ë“¤ì—ˆë˜ ìƒê°ì€ style-component ë°©ì‹ìœ¼ë¡œ css ë¥¼ component ì•ˆì— js class ë¡œ ë„£ì–´ì„œ zero-runtime ì´ ì•„ë‹ˆì§€ ì•Šì„ê¹Œ í•˜ëŠ” ê±±ì •ì´ì—ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ vanilla-extract ì—ì„œ ë™ì‘í•˜ëŠ” ë°©ì‹ì€ component ë¥¼ ìƒˆë¡œ javascriptì—ì„œ ì¦‰ ë¸Œë¼ìš°ì € ë‹¨ì—ì„œ ë§Œë“œëŠ” ê³¼ì •ì´ ì•„ë‹Œ compile ê³¼ì •ì—ì„œ class ë¥¼ ë§Œë“¤ì–´ì£¼ê³  ë„˜ê²¨ ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ì•„ë˜ console.log ë¥¼ ì°ì–´ì„œ ë§Œë“¤ì–´ì§„ class ëª…ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

> ğŸ’¡ vanilla-extract ì¸¡ì—ì„œ ë¹Œë“œ ê³¼ì •ì‹œ class ëª…ì„ ì¤‘ë³µì—†ì´ ê´€ë¦¬í•´ì£¼ê¸° ë•Œë¬¸ì— safe í•œ class ê´€ë¦¬ê°€ ìë™ìœ¼ë¡œ ì ìš©ë©ë‹ˆë‹¤.

```typescript
console.log(button.classNames.base);
// -> app_button__129pj250
console.log(button.classNames.variants.color.black);
// -> app_button_color_black__129pj251
console.log(button.classNames.variants.size.small);
// -> app_button_size_small__129pj254
```

ì‚¬ì „ì— ëª¨ë“  .css.ts íŒŒì¼ì„ compile ê³¼ì •ì—ì„œ css íŒŒì¼ë¡œ ë§Œë“¤ê³  ì¤‘ë³µë˜ì§€ì•ŠëŠ” class ë¥¼ ë§Œë“œëŠ” ê²ƒì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œë¶€í„´ ì œ ì¶”ì¸¡ì´ì§€ë§Œ, componentì—ì„  í•´ë‹¹ class ëª… ë§¤ì¹­ ì‘ì—…ë§Œ ì´ë£¨ì–´ì§€ë¯€ë¡œ ì™„ì „í•œ zero-runtime í™˜ê²½ì€ ì•„ë‹ˆê² ì§€ë§Œ, ë¶€ë¶„ì ì¸ zero-runtime í™˜ê²½ìœ¼ë¡œ ì œ ì½”ë“œê°€ êµ¬í˜„ë˜ì—ˆë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. (ì´ë¶€ë¶„ì— ëŒ€í•´ ìì„¸í•˜ ì•Œê³  ê³„ì‹ ë¶„ì€ ëŒ“ê¸€ ë‚¨ê²¨ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤. ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì•„ë¬´ë¦¬ ì°¾ì•„ë´ë„ ëª…í™•í•œ ë‹µë³€ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.)

ì¶”ê°€ì ìœ¼ë¡œ ë§Œì•½ ìœ„ recipe ì™¸ì˜ ë¶€ê°€ì ì¸ ì˜µì…˜ì´ í•„ìš”í•  ê²½ìš° ex) marginTop : 10px ìƒˆë¡œ recipe ì— ê³„ì†í•´ì„œ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ê³µë™ ì‘ì—…ì‹œ ê³µë™ì˜ íŒŒì¼ì„ ê±´ë“œë¦¬ëŠ” ì‘ì—…ìœ¼ë¡œ ì§€ì–‘ë©ë‹ˆë‹¤. ì´ê²½ìš° ì•ì„œ ë§ì”€ë“œë¦°ëŒ€ë¡œ assignInlineVars í˜¹ì€ styleMerge ë¥¼ ì´ìš©í•˜ë©´ ë˜ëŠ”ë° ê°„ë‹¨í•˜ê²Œ assignInlineVars ë¥¼ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤. 

> ğŸ’¡ assignInlineVars ëŠ” runtime ì‹œ ë¹Œë“œë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìì²´ê°€ ë§¤ìš° ê°€ë²¼ì›Œ ê°€ë”ì”© ì‚¬ìš©í•œë‹¤ë©´ ì„±ëŠ¥ì— í° ì°¨ì´ê°€ ì—†ìŠµë‹ˆë‹¤


### ë°˜ì‘í˜• êµ¬í˜„

ë°˜ì‘í˜•ì„ íš¨ê³¼ì ìœ¼ë¡œ êµ¬í˜„í•˜ë©´ì„œ atomic design pattern ì„ ë”°ë¥´ëŠ” ë°©ì‹ì€ ì—†ì„ê¹Œë¥¼ ê³ ë¯¼í•˜ë˜ ì¤‘ recipe ì™€ sprinkles ë¥¼ ê²°í•© í•˜ëŠ” ë°©ë²•ì„ ìƒê°í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì•„ì‰½ê²Œë„ recipe ë‚´ì—ì„  ìˆœìˆ˜ style ì˜µì…˜ë§Œ ì‚¬ìš©ê°€ëŠ¥í•˜ë©° sprinkles ë¥¼ ì§€ì›í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.


```typescript
import { style } from '@vanilla-extract/css';
import { recipe } from '@vanilla-extract/recipes';
import { sprinkles } from '@/styles/sprinkles.css';

// ë°•ìŠ¤ëŠ” div, section í˜•íƒœì˜ ê¸°ë³¸ì ì¸ ë‹¨ìœ„

export const box = recipe({
    base: {
      width : '100%',
      // ì´ ë¶€ë¶„ì—ì„œ ì—ëŸ¬ ë°œìƒ - recipe ë‚´ë¶€ì— sprinkles ì‚¬ìš© ë¶ˆê°€
      sprinkles({
        display : { mobile: 'block', tablet : 'flex', desktop : 'flex' }
      }),
      

    },
  
    variants: {

    },
  
    defaultVariants: {

    }
  });
```

ì¡°ê¸ˆ ë²ˆê±°ë¡­ê¸´ í•˜ì§€ë§Œ sprinkles ë¡œ ì‚¬ì „ì •ì˜ ëœ ë°©ë²•ì„ ì‚¬ìš©í•˜ì§€ ëª»í•œë‹¤ë©´ ì§ì ‘ media query ë¥¼ ì´ìš©í•˜ë©´ í•´ê²°ë˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.

```typescript
import { style } from '@vanilla-extract/css';
import { recipe } from '@vanilla-extract/recipes';

// ë°•ìŠ¤ëŠ” div, section í˜•íƒœì˜ ê¸°ë³¸ì ì¸ ë‹¨ìœ„

export const box = recipe({
    base: {
      width : '100%',
      display : 'block',
      // ìˆ˜ì •í•œ ë¶€ë¶„
      '@media' : {
        'screen and (min-width: 768px)': {
          display : 'flex'
        },
      }
    },
  
    variants: {

    },
  
    defaultVariants: {

    }
  });
```

'ì´ë ‡ê²Œ ë˜ë©´ sprinkles ëŠ” ê´œíˆ ë§Œë“ ê±° ì•„ë‹Œê°€?' ë¼ê³  ìƒê° í•  ìˆ˜ ìˆì§€ë§Œ, 'ì–¸ì œë“ ì§€ ë‚´ê°€ ì„¤ì •í•´ë‘” ê°’ì„ í¸í•˜ê²Œ ê°€ì ¸ì™€ ì“¸ ìˆ˜ ìˆë‹¤' ë¼ëŠ” sprinkls ì˜ ëª©ì ì„ ìƒê°í•´ë³´ë©´, ì¶”í›„ assignInlineVars ë¥¼ í†µí•´ ê°’ì„ ìƒí™©ì— ë§ê²Œ ì§€ì •í•´ì¤˜ì•¼í•  ê²½ìš° sprinkles ëŠ” ìƒê°ë³´ë‹¤ ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìµœì¢…ì ìœ¼ë¡œ box Component ë¥¼ atomic í•œ ë°©ì‹ìœ¼ë¡œ ì œì‘í•œ ì½”ë“œì…ë‹ˆë‹¤.

```typescript
// box.css.ts

import { vars } from '@/styles/globalTheme.css';
import { recipe } from '@vanilla-extract/recipes';

// ë°•ìŠ¤ëŠ” div, section í˜•íƒœì˜ ê¸°ë³¸ì ì¸ ë‹¨ìœ„

export const box = recipe({
    base: {
      width : '100%',
      display : 'block',
      '@media' : {
        'screen and (min-width: 768px)': {
          display : 'flex'
        },
      }
    },
  
    variants: {
      color: {
        neutral: { backgroundColor: vars.themeColor.color.mainBackground },
        primary: { backgroundColor: vars.themeColor.color.contentBackground },
        secondary: { backgroundColor: vars.themeColor.color.btnColor }
      },
      padding: {
        none: { padding: '0' },
        small: { padding: vars.space.small },
        medium: { padding: vars.space.medium },
        large: { padding: vars.space.large }
      },
      margin: {
        none: { margin: '0' },
        small: { margin: vars.space.small  },
        medium: { margin: vars.space.medium  },
        large: { margin: vars.space.large  }
      },
      alignItems: {
        start: { alignItems: 'flex-start' },
        center: { alignItems: 'center' },
        end: { alignItems: 'flex-end' }
      },
      justifyContent: {
        start: { justifyContent: 'flex-start' },
        center: { justifyContent: 'center' },
        end: { justifyContent: 'flex-end' },
        spaceBetween: { justifyContent: 'space-between' },
        spaceAround: { justifyContent:'space-around' }
      },
      border: {
        none: { border: 'none' },
        thin: { border: '1px solid #ddd' },
        thick: { border: '2px solid #333' }
      }
    },
  
    defaultVariants: {
      padding: 'medium'
    }
  });

```

```typescript
// box.tsx

import React from 'react';
import { box } from './box.css';

interface BoxProps {
    children: React.ReactNode;
    color?: 'neutral' | 'primary' | 'secondary';
    padding?: 'small' | 'medium' | 'large';
    margin?: 'none' | 'small' | 'medium' | 'large';
    border?: 'none' | 'thin' | 'thick';
    alignItems?: 'start' | 'center' | 'end';
    justifyContent?: 'start' | 'center' | 'end' | 'spaceBetween' | 'spaceAround';
}

const Box: React.FC<BoxProps> = ({  
    color,
    padding,
    margin,
    border,
    alignItems,
    justifyContent,
    children
}) => {
    return (
        <div className={box({color, padding, margin, border, alignItems, justifyContent})}>
            {children}
        </div>
    );
};

export default Box;
```

```typescript
// page.tsx

import Box from "@/components/box/box";

export default function Home() {
  return (
    <main className="flex min-h-screen flex-col items-center justify-between p-24">
      <Box justifyContent='spaceBetween'>
        <div>
          hello world
          ì•ˆë…•í•˜ì„¸ìš” í°íŠ¸ í™•ì¸ìš© ê¸€ ì‘ì„± ì…ë‹ˆë‹¤.
        </div>
        <h1>í°íŠ¸ í™•ì¸</h1>
        <a href="/about">About</a>
      </Box>
    </main>
  );
}

```

media query ì—­ì‹œ ì˜ ì ìš©ë˜ì—ˆê³  ì—ëŸ¬ê°€ ì—†ëŠ” ëª¨ìŠµì…ë‹ˆë‹¤.

![](/images/image-2.gif)

## Storybook

### setting for Test


![](/images/3c6f7d2f-3a40-489d-b302-cc0648309b27-image.png)


- Storybook ìµœì‹ ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í•˜ë‹ˆ ìœ„ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
- Storybook8 ë²„ì „ì—ì„œ webpack5 ì™€ì˜ í˜¸í™˜ì´ ë¬¸ì œê°€ ë˜ëŠ”ê²ƒ ê°™ìŠµë‹ˆë‹¤.
- vite ë¡œ bundler ë³€ê²½ì‹œ ë¬¸ì œëŠ” í•´ê²°ë˜ëŠ” ê²ƒ ê°™ì§€ë§Œ, webpack ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤. (ê¸°ì–µì´ í¬ë¯¸í•˜ì§€ë§Œ nextjs v12 ì´í›„ vite ë¥¼ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê¸€ì„ ë³¸ê±°ê°™ìŠµë‹ˆë‹¤.. / ì˜ëª»ëœ ì •ë³´ì¼ê²½ìš° ëŒ“ê¸€ë¡œ ì•Œë ¤ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.)


![](/images/dcf26740-7f72-4971-bb3e-922d9d3da9b1-image.png)



- ì´í›„ ê³„ì† ì—ëŸ¬ì— ëŒ€í•´ ì°¾ì•„ë´¤ì§€ë§Œ, storybook8 ì— ëŒ€í•œ í•´ê²°ì„ í•œ ì‚¬ëŒì„ ì°¾ì§€ëª»í–ˆìŠµë‹ˆë‹¤.
- ```npx storybook automigrate``` ë¶ˆì•ˆí•˜ì§€ë§Œ ì—ëŸ¬ì—ì„œ ì•Œë ¤ì¤€ ì˜¤í†  ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì§„í–‰ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.


![](/images/51a7ab81-8ac8-4ae9-8b93-afdf74ec4fe7-image.png)



![](/images/6b9b1a24-d64a-4b8e-9f20-684c7e6d9416-image.png)



ê²°ê³¼ëŠ” ëŒ€ì„±ê³µ, ê´œíˆ ê±±ì •í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ìœ„ì²˜ëŸ¼ í•„ìš”í•œ ì„¤ì •ë“¤ì„ ë¬¼ì–´ë³´ê¸°ë„í•˜ë‹ˆ ë¶ˆí•„ìš”í•˜ë‹¤ê³  ìƒê°í•˜ëŠ” ë¶€ë¶„ì€ ì œì™¸í•˜ê³  ì§„í–‰í•˜ì…”ë„ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤. (ì €ëŠ” ëª¨ë‘ Y í•˜ì˜€ìŠµë‹ˆë‹¤.)

ì•„ë˜ëŠ” ìµœì¢…ì ìœ¼ë¡œ ë³€ê²½ëœ storybook/main.ts íŒŒì¼ì…ë‹ˆë‹¤.

```typescript
// .storybook/main.ts

const { VanillaExtractPlugin } = require("@vanilla-extract/webpack-plugin");
const { merge } = require("webpack-merge");

module.exports = {
  stories: ["../src/**/*.mdx", "../src/**/*.stories.@(js|jsx|ts|tsx)"],

  addons: [
    "@storybook/addon-links",
    "@storybook/addon-essentials",
    "@storybook/addon-interactions",
  ],

  framework: {
    name: "@storybook/nextjs",
    options: {}
  },

  webpackFinal: async (config) =>
    merge(config, {
      plugins: [new VanillaExtractPlugin()],
    }),

  docs: {
    autodocs: true
  }
};
```

### Test

```typescript
// @/src/stories/button.stories.tsx

import React from 'react';
import Button from '@/components/atom/button/button';

export default {
  title: 'components/Button',
  component: Button
};

export const BaseButton = () => {
  return <Button>BUTTON</Button>;
};

BaseButton.story = {
  name: 'Default'
};

export const ColorPaletteButton = () => {
  return (
    <div>
      <Button color='black'>color</Button>
      <Button color='white'>color</Button>
      <Button color='gray-100'>color</Button>
      <Button color='gray-300'>color</Button>
      <Button color='gray-500'>color</Button>
      <Button color='gray-700'>color</Button>
      <Button color='gray-800'>color</Button>
      <Button color='gray-900'>color</Button>
    </div>
  );
};

export const SizePaletteButton = () => {
  return (
    <div>
      <Button color='gray-700' size="small" margin='small'>size</Button>
      <Button color='gray-700' size="medium" margin='small'>size</Button>
      <Button color='gray-700' size="large" margin='small'>size</Button>
      <Button color='gray-700' size="fit" margin='small'>size</Button>
      <Button color='gray-700' size="circle" margin='small'>size</Button>
    </div>
  )
};

```

- ìƒ‰, ì‚¬ì´ì¦ˆ, margin ë§Œìœ¼ë¡œ atomic button ì„ ê°„ë‹¨íˆ ì œì‘í•´ í…ŒìŠ¤íŠ¸ í•˜ì˜€ìŠµë‹ˆë‹¤.


![](/images/63d731cb-eff7-4c86-afb6-6bd963ae89c0-image.png)



![](/images/d495e8d8-348d-4c5a-abb8-f6c409525daa-image.png)



## ë§ˆë¬´ë¦¬

### ì–´ë ¤ì› ë˜ì .
1. nextjs14 + storybook8 ë²„ì „ê³¼ webpack ì˜ í˜¸í™˜ì´ ì–´ë ¤ì› ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê²°êµ­ automigrations í•´ì£¼ì–´ ì‰½ê²Œ í•´ê²°í•  ìˆœ ìˆì§€ë§Œ, ë‹¤ë¥¸ referencesê°€ ë§ì´ ì—†ê¸° ë•Œë¬¸ì— ë§Œì•½ ì„¤ì •ì´ ì™„ì „íˆ ê¼¬ì—¬ automigrationsê°€ ë¶ˆê°€ëŠ¥í•œ ê²½ìš° ì„¤ì •ì—ì„œ ì–´ë ¤ì›€ì´ ë§ì„ ê²ƒ ê°™ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.
2. vanilla-extract ë¡œ atomic design pattern ì„ ì–´ë–»ê²Œ ì ìš©í•´ ë³¼ ìˆ˜ ìˆì„ê¹Œ? ë¼ëŠ” ë¬¼ìŒì˜ í•´ë‹µì„ ì°¾ê¸°ìœ„í•´ vanilla-extract ê³µì‹ ë¬¸ì„œë¥¼ 3ë²ˆ ì •ë„ ì •ë…í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì œê°€ ìƒê°í•œ ë‹µì€ recipe ì™€ sprinkles, styleMerge ì •ë„ ì˜€ì§€ë§Œ, ë” ì¢‹ì€ ì•„ì´ë””ì–´ê°€ ìˆìœ¼ì‹ ë¶„ì€ ëŒ“ê¸€ë¡œ ì•Œë ¤ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤!
3. ì§€ê¸ˆë„ ê³ ë¯¼ì´ì§€ë§Œ zero-runtime css(vanilla-extract) / client, server components ë¶„ë¦¬ë¡œ ì„±ëŠ¥ ìµœì í™”ë¥¼í•˜ëŠ” ê³¼ì •ì„ ì°¾ëŠ” ê²ƒì€ í”„ë¡œì íŠ¸ê°€ ëë‚  ë•Œê¹Œì§€ ê³ ë¯¼ì´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ê·¸ë˜ë„ ìƒˆë¡œìš´ ê¸°ìˆ ì„ ë°°ìš°ëŠ” ê²ƒì´ ì¬ë¯¸ ìˆê³  ë‹¤ìŒì—ë„ ìƒˆë¡œìš´ ê¸°ìˆ , ë²„ì „ì´ ë‚˜ì˜¨ë‹¤ë©´ ë„ì „í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

### ì˜¤ëŠ˜ í•œì¼ / ë‚´ì¼ í• ì¼
atomic design pattern ì„ vanilla-extract ì˜ recipe ë¡œ êµ¬ì„±í•˜ê³  ì ìš©í•˜ë©° storybookìœ¼ë¡œ test ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

ë‹¤ìŒì—ëŠ” ë³¸ê²©ì ìœ¼ë¡œ ì œê²Œ í•„ìš”í•œ atoms ì™€ navbar, footer ë“± moleculars ì œì‘ë„ í•˜ë©° ê°œë°œì˜ ì†ë„ë¥¼ ì˜¬ë ¤ë³´ê² ìŠµë‹ˆë‹¤.


ê°ì‚¬í•©ë‹ˆë‹¤.

---
### ì°¸ê³ ìë£Œ

- ì¶œì²˜ : https://medium.com/catchtable/how-to-use-vanilla-extract-in-catchtable-b2c-6c4e712c471f
- ì¶œì²˜ : https://vanilla-extract.style/documentation/packages/recipes/
- ì¶œì²˜ : https://yong-nyong.tistory.com/92
- ì¶œì²˜ : https://velog.io/@velopert/create-your-own-design-system-with-storybook
- ì¶œì²˜ : https://github.com/vanilla-extract-css/vanilla-extract/discussions/371